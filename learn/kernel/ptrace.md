
debug调试器、断点与ptrace原理

* 调试器工作原理（1）：基础篇：http://blog.jobbole.com/23463/
    * 调试器是基于Ptrace实现的，Ptrace 是Linux内核的一部分，所以它能够获取进程所有内核级信息
    * Linux Ptrace API 允许一个（调试器）进程来获取低等级的其他（被调试的）进程的信息
    * 通过Ptrace，调试器可以：读写被调试进程的内存、控制其执行、修改信号处理或者image

* 调试器工作原理（2）：实现断点：http://blog.jobbole.com/23632/    
    要在被调试进程中的某个目标地址上设定一个断点，调试器需要做下面两件事情：
    * 保存目标地址上的数据
    * 将目标地址上的第一个字节替换为int 3指令 

    然后，当调试器向操作系统请求开始运行进程时（通过前一篇文章中提到的PTRACE_CONT），进程最终一定会碰到int 3指令。此时进程停止，进入到中断处理程序，最终操作系统将发送一个信号给调试器，此时调试器可通过ptrace获取调试进程信息。    


* 调试器工作原理（3）：调试信息：http://blog.jobbole.com/24916/
    * 使用特定的编译选项，编译后的目标文件中会包含调试信息
    * 调试信息以段的形式（代码段是text）保存着目标文件，可使用objdump查看，名称一般是debug***
    * 调试信息包含了每个诸如每个函数的第一条指令地址与函数名的对应关系，从而可以使我们能通过函数名设置断点


